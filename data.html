<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thomasstore - PPOB Data System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: fadeInDown 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .header p {
            color: #cccccc;
            font-size: 1.1rem;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .input-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 30px;
            animation: fadeInUp 0.8s ease-out 0.2s both;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #00d4ff;
        }

        .form-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }

        .check-btn {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
        }

        .check-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 212, 255, 0.4);
        }

        .provider-info {
            background: rgba(0, 212, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #00d4ff;
            margin: 20px 0;
            animation: slideInLeft 0.6s ease-out;
        }

        .provider-info h3 {
            color: #00d4ff;
            margin-bottom: 10px;
        }

        .data-packages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
            animation: fadeInUp 0.8s ease-out 0.4s both;
        }

        .package-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .package-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
        }

        .package-card h4 {
            color: #00d4ff;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .package-details {
            margin-bottom: 20px;
        }

        .package-details p {
            margin-bottom: 8px;
            color: #cccccc;
        }

        .price {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00ff88;
            margin-bottom: 10px;
        }

        .tax-info {
            font-size: 0.9rem;
            color: #ffaa00;
        }

        .buy-btn {
            background: linear-gradient(45deg, #00ff88, #00cc66);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .buy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 255, 136, 0.4);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #2d2d2d, #1a1a1a);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close:hover {
            color: #00d4ff;
        }

        .receipt {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .receipt h3 {
            color: #00d4ff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .receipt-item:last-child {
            border-bottom: none;
            font-weight: bold;
            color: #00ff88;
            font-size: 1.1rem;
        }

        .customer-form {
            margin-top: 20px;
        }

        .customer-form input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: #ffffff;
            transition: border-color 0.3s ease;
        }

        .customer-form input:focus {
            outline: none;
            border-color: #00d4ff;
        }

        .send-btn {
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.4);
        }

        .hidden {
            display: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .input-section {
                padding: 20px;
            }

            .data-packages {
                grid-template-columns: 1fr;
            }

            .modal-content {
                margin: 10% auto;
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .header h1 {
                font-size: 1.8rem;
            }

            .input-section {
                padding: 15px;
            }

            .package-card {
                padding: 20px;
            }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #00d4ff;
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Thomasstore</h1>
            <p>Platform Pembayaran Online Banking untuk Pembelian Paket Data</p>
        </div>

        <div class="input-section">
            <div class="form-group">
                <label for="phoneNumber">Nomor Telepon</label>
                <input type="text" id="phoneNumber" placeholder="Masukkan nomor telepon (08xxxxxxxxxx)" maxlength="13">
            </div>
            <button class="check-btn" onclick="checkProvider()">
                <span id="checkBtnText">Cek Provider</span>
            </button>
        </div>

        <div id="providerResult" class="hidden">
            <div class="provider-info">
                <h3 id="providerName"></h3>
                <p id="providerDetails"></p>
            </div>

            <div class="data-packages" id="dataPackages">
                <!-- Paket data akan ditampilkan di sini -->
            </div>
        </div>
    </div>

    <!-- Modal untuk Struk -->
    <div id="receiptModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="receipt">
                <h3>STRUK PEMBELIAN</h3>
                <div id="receiptDetails">
                    <!-- Detail struk akan ditampilkan di sini -->
                </div>
            </div>
            <div class="customer-form">
                <input type="text" id="customerName" placeholder="Nama Lengkap" required>
                <button class="send-btn" onclick="sendToWhatsApp()">
                    Kirim ke WhatsApp
                </button>
            </div>
        </div>
    </div>

    <script>
        // Database provider berdasarkan prefix
        const providerDatabase = {
            '0811': 'Halo (Telkomsel)',
            '0812': 'Simpati (Telkomsel)',
            '0813': 'Simpati (Telkomsel)',
            '0814': 'IM3 (Indosat)',
            '0815': 'Matrix (Indosat)',
            '0816': 'Matrix (Indosat)',
            '0817': 'XL',
            '0818': 'XL',
            '0819': 'XL',
            '0821': 'Simpati (Telkomsel)',
            '0822': 'Simpati (Telkomsel)',
            '0823': 'As (Telkomsel)',
            '0831': 'Axis',
            '0832': 'Axis',
            '0833': 'Axis',
            '0838': 'Axis',
            '0852': 'As (Telkomsel)',
            '0853': 'As (Telkomsel)',
            '0855': 'IM3 (Indosat)',
            '0856': 'IM3 (Indosat)',
            '0857': 'IM3 (Indosat)',
            '0858': 'Mentari (Indosat)',
            '0859': 'XL',
            '0877': 'XL',
            '0878': 'XL',
            '0881': 'Smartfren',
            '0882': 'Smartfren',
            '0883': 'Smartfren',
            '0884': 'Smartfren',
            '0885': 'Smartfren',
            '0886': 'Smartfren',
            '0887': 'Smartfren',
            '0888': 'Smartfren',
            '0889': 'Smartfren'
        };

        // Database paket data untuk setiap provider
        const dataPackages = {
            'Telkomsel': [
                { name: 'Data 1GB', size: '1GB', price: 19200, validity: '30 hari' },
                { name: 'Data 2GB', size: '2GB', price: 32500, validity: '30 hari' },
                { name: 'Data 3GB', size: '3GB', price: 47500, validity: '30 hari' },
                { name: 'Data 35GB', size: '35GB', price: 110000, validity: '30 hari' },
                { name: 'Data 65GB', size: '65GB', price: 160000, validity: '30 hari' }
            ],
            'Indosat': [
                { name: 'Data 1GB', size: '1GB', price: 12000, validity: '3 hari' },
                { name: 'Data 3GB', size: '3GB', price: 22000, validity: '7 hari' },
                { name: 'Data 6GB', size: '6GB', price: 38000, validity: '15 hari' },
                { name: 'Data 12GB', size: '12GB', price: 60000, validity: '30 hari' },
                { name: 'Data 25GB', size: '25GB', price: 90000, validity: '30 hari' }
            ],
            'XL': [
                { name: 'Data 1GB', size: '1GB', price: 13000, validity: '3 hari' },
                { name: 'Data 2.5GB', size: '2.5GB', price: 23000, validity: '7 hari' },
                { name: 'Data 8GB', size: '8GB', price: 45000, validity: '15 hari' },
                { name: 'Data 15GB', size: '15GB', price: 70000, validity: '30 hari' },
                { name: 'Data 30GB', size: '30GB', price: 100000, validity: '30 hari' }
            ],
            'Axis': [
                { name: 'Data 2GB', size: '2GB', price: 30000, validity: '60 hari' },
                { name: 'Data 3GB', size: '3GB', price: 38000, validity: '60 hari' },
                { name: 'Data 5GB', size: '5GB', price: 50000, validity: '60 hari' }
            ],
            'Smartfren': [
                { name: 'Data 10GB', size: '10GB', price: 40000, validity: '30 hari' },
                { name: 'Data 12B', size: '12GB', price: 56700, validity: '30 hari' },
                { name: 'Promo Data 55GB', size: '55GB', price: 33000, validity: '30 hari' },
                { name: 'Data 90GB', size: '90GB', price: 70000, validity: '30 hari' },
                { name: 'Data 127GB', size: '127GB', price: 105000, validity: '30 hari' }
            ]
        };

        let currentPackage = null;
        let currentProvider = '';
        let currentPhone = '';

        function calculateTax(price) {
            // Setiap kelipatan 10.000, pajak 500
            const taxMultiplier = Math.floor(price / 10000);
            return taxMultiplier * 500;
        }

        function checkProvider() {
            const phoneInput = document.getElementById('phoneNumber');
            const phone = phoneInput.value.trim();
            
            if (!phone) {
                alert('Silakan masukkan nomor telepon');
                return;
            }

            if (!/^08\d{8,11}$/.test(phone)) {
                alert('Format nomor telepon tidak valid. Gunakan format 08xxxxxxxxxx');
                return;
            }

            // Tambahkan loading
            const checkBtn = document.getElementById('checkBtnText');
            checkBtn.innerHTML = '<span class="loading"></span>Memeriksa...';

            setTimeout(() => {
                const prefix = phone.substring(0, 4);
                const provider = providerDatabase[prefix];

                if (provider) {
                    currentPhone = phone;
                    const baseProvider = provider.split(' ')[0];
                    
                    if (baseProvider === 'Halo' || baseProvider === 'Simpati' || baseProvider === 'As') {
                        currentProvider = 'Telkomsel';
                    } else if (baseProvider === 'IM3' || baseProvider === 'Matrix' || baseProvider === 'Mentari') {
                        currentProvider = 'Indosat';
                    } else {
                        currentProvider = baseProvider;
                    }

                    displayProviderInfo(provider, currentProvider);
                    displayDataPackages(currentProvider);
                } else {
                    alert('Provider tidak dikenali untuk nomor ini');
                }

                checkBtn.innerHTML = 'Cek Provider';
            }, 1500);
        }

        function displayProviderInfo(providerName, baseProvider) {
            const providerResult = document.getElementById('providerResult');
            const providerNameEl = document.getElementById('providerName');
            const providerDetailsEl = document.getElementById('providerDetails');

            providerNameEl.textContent = `Provider: ${providerName}`;
            providerDetailsEl.textContent = `Nomor: ${currentPhone} | Jaringan: ${baseProvider}`;
            
            providerResult.classList.remove('hidden');
        }

        function displayDataPackages(provider) {
            const packagesContainer = document.getElementById('dataPackages');
            const packages = dataPackages[provider] || [];

            packagesContainer.innerHTML = '';

            packages.forEach((pkg, index) => {
                const tax = calculateTax(pkg.price);
                const totalPrice = pkg.price + tax;

                const packageCard = document.createElement('div');
                packageCard.className = 'package-card';
                packageCard.innerHTML = `
                    <h4>${pkg.name}</h4>
                    <div class="package-details">
                        <p><strong>Kuota:</strong> ${pkg.size}</p>
                        <p><strong>Masa Aktif:</strong> ${pkg.validity}</p>
                        <p><strong>Harga Dasar:</strong> Rp ${pkg.price.toLocaleString('id-ID')}</p>
                        <p class="tax-info"><strong>Pajak:</strong> Rp ${tax.toLocaleString('id-ID')}</p>
                    </div>
                    <div class="price">Rp ${totalPrice.toLocaleString('id-ID')}</div>
                    <button class="buy-btn" onclick="buyPackage(${index})">Beli Paket</button>
                `;

                packagesContainer.appendChild(packageCard);
            });
        }

        function buyPackage(packageIndex) {
            const packages = dataPackages[currentProvider];
            currentPackage = packages[packageIndex];
            
            if (currentPackage) {
                showReceiptModal();
            }
        }

        function showReceiptModal() {
            const modal = document.getElementById('receiptModal');
            const receiptDetails = document.getElementById('receiptDetails');
            
            const tax = calculateTax(currentPackage.price);
            const totalPrice = currentPackage.price + tax;

            receiptDetails.innerHTML = `
                <div class="receipt-item">
                    <span>Nomor Telepon:</span>
                    <span>${currentPhone}</span>
                </div>
                <div class="receipt-item">
                    <span>Provider:</span>
                    <span>${currentProvider}</span>
                </div>
                <div class="receipt-item">
                    <span>Paket:</span>
                    <span>${currentPackage.name}</span>
                </div>
                <div class="receipt-item">
                    <span>Kuota:</span>
                    <span>${currentPackage.size}</span>
                </div>
                <div class="receipt-item">
                    <span>Masa Aktif:</span>
                    <span>${currentPackage.validity}</span>
                </div>
                <div class="receipt-item">
                    <span>Harga Dasar:</span>
                    <span>Rp ${currentPackage.price.toLocaleString('id-ID')}</span>
                </div>
                <div class="receipt-item">
                    <span>Pajak:</span>
                    <span>Rp ${tax.toLocaleString('id-ID')}</span>
                </div>
                <div class="receipt-item">
                    <span>Total Bayar:</span>
                    <span>Rp ${totalPrice.toLocaleString('id-ID')}</span>
                </div>
            `;

            modal.style.display = 'block';
        }

        function closeModal() {
            const modal = document.getElementById('receiptModal');
            modal.style.display = 'none';
            document.getElementById('customerName').value = '';
        }

        function sendToWhatsApp() {
            const customerName = document.getElementById('customerName').value.trim();
            
            if (!customerName) {
                alert('Silakan masukkan nama lengkap');
                return;
            }

            const tax = calculateTax(currentPackage.price);
            const totalPrice = currentPackage.price + tax;
            const currentDate = new Date().toLocaleDateString('id-ID', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });

            const message = `*STRUK PEMBELIAN PPOB*
━━━━━━━━━━━━━━━━━━━━━

👤 *Nama:* ${customerName}
📱 *Nomor:* ${currentPhone}
🏢 *Provider:* ${currentProvider}
📦 *Paket:* ${currentPackage.name}
💾 *Kuota:* ${currentPackage.size}
⏰ *Masa Aktif:* ${currentPackage.validity}

💰 *RINCIAN PEMBAYARAN*
━━━━━━━━━━━━━━━━━━━━━
• Harga Dasar: Rp ${currentPackage.price.toLocaleString('id-ID')}
• Pajak: Rp ${tax.toLocaleString('id-ID')}
• *Total: Rp ${totalPrice.toLocaleString('id-ID')}*

📅 *Tanggal:* ${currentDate}

Thankyou for buying in ThomasStore! 🙏

_your transaction will be processed soon_`;

            const whatsappURL = `https://wa.me/081274945189?text=${encodeURIComponent(message)}`;
            window.open(whatsappURL, '_blank');
            
            closeModal();
        }

        // Event listener untuk input nomor telepon
        document.getElementById('phoneNumber').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkProvider();
            }
        });

        // Event listener untuk input nama customer
        document.getElementById('customerName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendToWhatsApp();
            }
        });

        // Close modal ketika klik di luar modal
        window.onclick = function(event) {
            const modal = document.getElementById('receiptModal');
            if (event.target === modal) {
                closeModal();
            }
        }
    </script>
</body>
</html>